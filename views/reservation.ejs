<!DOCTYPE html>
<html>

<head>
    <meta charset='UTF-8'>
    <title>
        예약관리
    </title>
    <meta charset='UTF-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="./jquery-ui-1.12.1/datepicker-ko.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');

        * {
            font-family: 'Nanum Gothic', sans-serif;
        }

        table,
        th,
        td {
            border: 1px solid #bcbcbc;
            border-radius: 5px;
            border-collapse: collapse;
            text-align: center;
            padding: 5px;
        }

        .avatar--md .avatar__content img {
            width: 40px;
            height: 40px;
        }

        .mb-4 {
            margin-bottom: 50px;
        }
    </style>
    <!-- 생년월일 입력 기능 -->
    <script type="text/javascript">
        $(function () {
            $("#reservation_birth").datepicker({
                dateFormat: 'yy-mm-dd',
                changeYear: true,
                changeMonth: true
            });
        });
    </script>
    <!-- 예약추가 달력기능 -->
    <script type="text/javascript">
        $(function () {
            $("#date1").datepicker({
                dateFormat: 'yy-mm-dd',
                changeYear: true,
                changeMonth: true
            });
        });
    </script>
    <script type="text/javascript">
        $(function () {
            $("#date2").datepicker({
                dateFormat: 'yy-mm-dd',
                changeYear: true,
                changeMonth: true
            });
        });
    </script>
    <!-- 이메일폼 -->
    <script type="text/javascript">
        //이메일 입력방식 선택
        $('#selectEmail').change(function () {
            $("#selectEmail option:selected").each(function () {
                if ($(this).val() == '1') { //직접입력일 경우 (일단 안함)
                    $("#str_email02").val(''); //값 초기화
                    $("#str_email02").attr("disabled", false); //활성화
                } else { //직접입력이 아닐경우
                    $("#str_email02").val($(this).text()); //선택값 입력
                    $("#str_email02").attr("disabled", true); //비활성화
                }
            });
        });
    </script>
    <!-- 예약검색기능 -->
    <script>
        $(document).ready(function () {
            $("#keyword").keyup(function () {
                var k = $(this).val();
                $("#reservation_table > tbody > tr").hide();
                var temp = $("#reservation_table > tbody > tr > td:nth-child(5n+1):contains('" + k + "')");

                $(temp).parent().show();
            })
        })
    </script>

    <style>
        #add_res {
            background-color: rgba(176, 224, 230, 0.2);
            color: black;
            font-weight: bold;
            border: solid 2px powderblue;
            border-radius: 10px;

            margin-bottom: 20px;
            outline: none !important;
        }

        #add_res:hover {
            background-color: rgba(176, 224, 230, 0.7);
            color: white;
            transition-duration: 0.2s;
        }

        #add_res,
        .mb-3 {
            margin-left: 30px;
        }

        #tooltipAddNew {
            background-color: powderblue;
            border-radius: 50px;
            border: none;
        }

        #tooltipAddNew:hover {
            background-color: rgb(120, 172, 179);
            transition-duration: 0.2s;
        }

        .small.mb-3 {
            margin-left: 0;
        }

        .form_group {
            display: flex;
        }

        #reservation_name {
            width: 110px;
        }

        #email_id {
            width: 110px;
        }

        #selectEmail {
            width: 130px;
        }

        #res_people,
        #res_breakfast {
            width: 34px;
        }

        #res_pw {
            width: 150px;
        }

        #reservation_nation {
            width: 130px;
        }

        #reservation_birth {
            width: 110px;
        }

        #reservation_name,
        #email_id,
        #selectEmail,
        #res_people,
        #date1,
        #date2,
        #res_pw,
        #res_breakfast,
        #reservation_nation,
        #reservation_birth {
            display: inline-block;
        }

        #date1,
        #date2 {
            width: 110px;
        }

        #res_commit {
            background-color: powderblue;
            border: none;
            color: white;
            margin-left: 500px;
        }

        #res_commit:hover {
            background-color: rgb(120, 172, 179);
            transition-duration: 0.2s;
        }

        .form-group label {
            width: 90px;
            margin-right: 1px;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="cardfooter.css">
</head>

<body>
    <div style="margin-left: 8.4px; margin-top: 8px;"><%- include('./nav'); %></div>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <!--  nav바는 흰색, 밑 배경은 다른 색으로 까는것도 좋을 것 같음..  -->
    <div style="background-color: #f8f8f8; height: max-content; padding-bottom: 10px;">
        <div class="container" style="padding-top: 70px;">
            <div class="row">
                <!-- 예약추가 버튼 : 디자인시 바꿔주세용 -->
                <div class="modal fade" id="myModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <form name="예약추가" action="/add_reservation" method="post">
                            <div class="modal-content" style="top: 100px;">
                                <div class="modal-header">
                                    <h2 class="modal-title">예약추가</h2>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button> <br>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label form="reservation_name">예약자명</label>
                                        <input name="reservation_name" type="text" id="reservation_name"
                                            class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label form="reservation_birth">생년월일</label>
                                        <input type="text" name="reservation_birth" id="reservation_birth" size="12"
                                            class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <!-- 디자인 시 이메일 앞부분, 뒷부분 한줄 배치 부탁드려요 -->
                                        <label for="email_id">예약자 이메일</label>
                                        <input type="text" name="email_id" id="email_id" class="form-control"> @
                                        <select class="form-control" name="email_select" id="selectEmail">
                                            <option value="naver.com" selected>naver.com</option>
                                            <option value="hanmail.net">hanmail.net</option>
                                            <option value="hotmail.com">hotmail.com</option>
                                            <option value="nate.com">nate.com</option>
                                            <option value="yahoo.co.kr">yahoo.co.kr</option>
                                            <option value="empas.com">empas.com</option>
                                            <option value="dreamwiz.com">dreamwiz.com</option>
                                            <option value="freechal.com">freechal.com</option>
                                            <option value="lycos.co.kr">lycos.co.kr</option>
                                            <option value="korea.com">korea.com</option>
                                            <option value="gmail.com">gmail.com</option>
                                            <option value="hanmir.com">hanmir.com</option>
                                            <option value="paran.com">paran.com</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation_nation">예약자 국적</label>
                                        <select class="form-control" name="reservation_nation" id="reservation_nation">
                                            <% for (var i=0; i<nations.length; i++){ %>
                                            <option value="<%=nations[i].name%>"><%=nations[i].name%></option>
                                            <%}%>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="res_people">투숙인원</label>
                                        <input name="reservation_people" id="res_people" type="text" class="form-control">
                                    </div>
                                    <div class="form-group">
                                        <label>입실 예정일</label>
                                        <!-- 달력기능 -->
                                        <input type="text" name="checkin_date" id="date1" size="12" class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <label>퇴실 예정일</label>
                                        <!-- 달력기능 -->
                                        <input type="text" name="checkout_date" id="date2" size="12" class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <label for="reservation">방타입</label>
                                        <label><input type="radio" name="reservation_type" value="single">싱글룸</label>
                                        <label><input type="radio" name="reservation_type" value="twin">트윈룸</label>
                                        <label><input type="radio" name="reservation_type" value="double">더블룸</label>
                                        <label><input type="radio" name="reservation_type" value="triple">트리플룸</label>
                                        <label><input type="radio" name="reservation_type" value="family">패밀리룸</label><br>
                                    </div>
                                    <div class="form-group">
                                        <label for="room">조식 예약 인원</label>
                                        <input name="reservation_breakfast" type="text" class="form-control"
                                            id="res_breakfast">
                                    </div>
                                    <div class="form-group">
                                        <label for="room">예약 비밀번호</label>
                                        <input name="reservation_pw" type="password" class="form-control" id="res_pw">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-default" id="res_commit">추가</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- 예약추가 팝업 끝 -->
                <div class="col-lg-3">
                    <div class="mb-4">
                        <div class="small mb-3">검색</div>
                        <div class="input-group" style="display: flex;">
                            <input placeholder="예약자명으로 검색" type="text" class="form-control" id="keyword">
                            <button class="btn btn-secondary"><i class="fa fa-search"></i></button>
                        </div>
                    </div>
                    <div class="mb-4">
                      <div id="myBtnContainer" class="btn-group">
                        <div class="small mb-3">예약상태별 보기</div>
                        <button class="btn active" onclick="myFunction('')"> Show all</button>
                        <button class="btn" onclick="myFunction('취소')"> 취소</button>
                        <button class="btn" onclick="myFunction('입실예정')"> 입실예정</button>
                      </div>
                    </div>
                    <div class="mb-4">
                        <div class="small mb-3">월별 예약 현황</div>
                        <ul class="nav flex-column nav-pills">
                            <li class="nav-item"><a href="#" class="nav-link"><i
                                        class="fa fa-fw fa-calendar-o mr-2"></i>Calendar</a></li>
                                        <!-- 달력기능 : 개인적으로 꼭 넣고 싶음..^^ -->
                        </ul>
                    </div>

                    <div class="mb-4">
                        <!-- 직원 배정을 위해 현재 출근 상태인 직원 나타내주면 좋을 듯 -->
                        <div class="small mb-3">출근 중 직원</div>
                        <ul class="nav flex-column nav-pills">
                            <li class="nav-item">
                                <a href="#" class="d-flex nav-link">
                                    <div class="media">
                                        <div class="mr-3 align-self-center media-left media-middle">
                                            <div class="avatar-image avatar-image--loaded">
                                                <div class="avatar avatar--md avatar-image__image">
                                                    <div class="avatar__content"><img
                                                            src="profile.png"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="media-body">
                                            <div class="mt-0">권유리1</div><span class="small">프론트 부서</span>
                                            <div class="mt-0"></div><span class="small">영어, 일본어</span>
                                        </div>
                                    </div><i class="fa fa-fw fa-circle text-success ml-auto align-self-center ml-2"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="d-flex nav-link">
                                    <div class="media">
                                        <div class="mr-3 align-self-center media-left media-middle">
                                            <div class="avatar-image avatar-image--loaded">
                                                <div class="avatar avatar--md avatar-image__image">
                                                    <div class="avatar__content"><img
                                                            src="profile.png"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="media-body">
                                            <div class="mt-0">권유리2</div><span class="small">프론트 부서</span>
                                            <div class="mt-0"></div><span class="small">영어, 일본어</span>
                                        </div>
                                    </div><i class="fa fa-fw fa-circle text-warning ml-auto align-self-center ml-2"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="d-flex nav-link">
                                    <div class="media">
                                        <div class="mr-3 align-self-center media-left media-middle">
                                            <div class="avatar-image avatar-image--loaded">
                                                <div class="avatar avatar--md avatar-image__image">
                                                    <div class="avatar__content"><img
                                                            src="profile.png"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="media-body">
                                            <div class="mt-0">권유리3</div><span class="small">프론트 부서</span>
                                            <div class="mt-0"></div><span class="small">영어, 일본어</span>
                                        </div>
                                    </div><i class="fa fa-fw fa-circle text-danger ml-auto align-self-center ml-2"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" id="add_res">예약 추가하기</button>
                <div class="col-lg-9" style="padding: 0;">
                    <div class="mb-3 Card_custom-card--border_5wJKy card">
                        <div class="table-responsive-xl">
                            <!-- 테이블 아이디 바꾸지 말아주세요 -->
                            <table id = "reservation_table"class="mb-0 table table-hover">
                                <thead>
                                    <tr>
                                        <th class="align-middle bt-0">예약자명</th>
                                        <th class="align-middle bt-0">예약상태</th>
                                        <th class="align-middle bt-0">입실시간</th>
                                        <th class="align-middle bt-0">방타입</th>
                                        <th class="align-middle bt-0">상세보기</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% for (var i = 0; i < reservation.length; i++) { %>
                                            <tr>
                                                <td class="align-middle">
                                                    <div><%= reservation[i].name %></div>
                                                </td>
                                                <td><span
                                                        class="label <% if (reservation[i].status === '취소') {%> label-danger <% } else {%> label-success  <% }%> label-pill"><%= reservation[i].status %></span>
                                                </td>
                                                <td class="align-middle">
                                                    <div><%= reservation[i].checkin%></div>
                                                </td>
                                                <td class="align-middle">
                                                    <div><%= reservation[i].room_type %></div>
                                                </td>
                                                <td class="align-middle">
                                                    <!-- 상세보기 버튼 -->
                                                    <button type="button" id="tooltipAddNew" data-toggle="modal" data-target="#myModal2" class="align-self-center btn btn-light"><i class="fa-fw fa fa-plus" style="color: white"></i></button>
                                                    <!-- 상세보기 팝업 -->
                                                    <div class="modal fade" id="myModal2" role="dialog">
                                                        <div class="modal-dialog">
                                                            <!-- Modal content-->
                                                            <form name="예약 상세페이지" action="" method="post">
                                                                <div class="modal-content" style="top: 100px;">
                                                                    <div class="modal-header">
                                                                        <h2 class="modal-title">예약 상세페이지</h2>
                                                                        <button type="button" class="close"
                                                                            data-dismiss="modal">&times;</button> <br>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <div class="form-group">
                                                                            <label form="checkout_time">퇴실시간<label>
                                                                                    <div><%= reservation[i].checkout%>
                                                                                    </div>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <h3>예약 취소</h3>
                                                                            <label form="reservation_pw">예약 비밀번호</label>
                                                                            <input type="password" name="reservation_pw"
                                                                                id="reservation_pw"
                                                                                class="form-control">
                                                                            <!-- 백에 비밀번호 보내고, 맞으면 -> 예약 취소(취소 상태로 변경) -->
                                                                            <button type="submit" class="btn_submit"
                                                                                id="btn22"
                                                                                style="margin-left: 235px;">확인</button>
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <h3>체크인</h3>
                                                                            <label form="reservation_checkin">배정
                                                                                객실</label>
                                                                            <input type="text"
                                                                                name="reservation_checkin_room"
                                                                                id="reservation_checkin"
                                                                                class="form-control">호<br>
                                                                            <label form="reservation_checkin">배정
                                                                                직원</label>
                                                                            <input type="text"
                                                                                name="reservation_checkin_staff"
                                                                                id="reservation_checkin"
                                                                                class="form-control">
                                                                            <!-- 백에 객실번호 보내면, 체크인 되게 -->
                                                                            <button type="submit" class="btn_submit"
                                                                                id="btn22"
                                                                                style="margin-left: 235px;">완료</button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <div class="form-group">
                                                                            <button type="submit"
                                                                                class="btn btn-default"
                                                                                id="res_commit">추가</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <% } %>
                                            </tbody>
                                            </table>
                                    </div>
                                    <div class="d-flex justify-content-center pb-0 card-footer"
                                        style="text-align: center;">
                                        <nav class="" aria-label="Page navigation example">
                                            <ul class="pagination">
                                                <li class="page-item"><a href="#" class="page-link"
                                                        aria-label="Previous"><span aria-hidden="true"><i
                                                                class="fa fa-fw fa-angle-left"></i></span><span
                                                            class="sr-only">Previous</span></a></li>
                                                <li class="page-item active"><a href="#" class="page-link">1</a></li>
                                                <li class="page-item"><a href="#" class="page-link">2</a></li>
                                                <li class="page-item"><a href="#" class="page-link">3</a></li>
                                                <li class="page-item"><a href="#" class="page-link"
                                                        aria-label="Next"><span aria-hidden="true"><i
                                                                class="fa fa-fw fa-angle-right"></i></span><span
                                                            class="sr-only">Next</span></a></li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

            </div>
            <script>
                function myFunction(input) {
                    var filter, table, tr, td, i, txtValue;
                    filter = input;
                    table = document.getElementById("reservation_table");
                    tr = table.getElementsByTagName("tr");
                    for (i = 0; i < tr.length; i++) {
                        td = tr[i].getElementsByTagName("td")[1];
                        if (td) {
                            txtValue = td.innerHTML || td.innerText;
                            if (txtValue.indexOf(filter) > -1) {
                                tr[i].style.display = "";
                            } else {
                                tr[i].style.display = "none";
                            }
                        }
                    }
                }

            </script>

</body>

</html>